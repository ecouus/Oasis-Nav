version: '3.8'

services:
  nav:
    # 生产环境：使用远程镜像（推荐）
    image: ecouus/oasis-nav:latest
    # 开发环境：本地构建（注释上面 image，取消下面注释）
    # build: .
    container_name: oasis-nav
    restart: unless-stopped
    ports:
      - "6966:6966"
    volumes:
      # 数据库文件挂载到本地，方便备份和迁移
      - ./data:/app/data
    environment:
      - DATABASE_PATH=/app/data/data.db
      - TZ=Asia/Shanghai
    # 安全设置
    security_opt:
      - no-new-privileges:true
    # 资源限制（可选）
    # deploy:
    #   resources:
    #     limits:
    #       cpus: '0.5'
    #       memory: 256M

